---
name: generate_command
description: 規約とベストプラクティスに従って新しいカスタムスラッシュコマンドを作成する
argument-hint: "[コマンドの目的と要件]"
---

# カスタムClaude Codeコマンドを作成

リクエストされたタスク用に`.claude/commands/`に新しいスラッシュコマンドを作成します。

## 目標

#$ARGUMENTS

## 活用すべき主要な機能

**ファイル操作：**
- Read、Edit、Write - ファイルを正確に変更
- Glob、Grep - コードベースを検索
- MultiEdit - アトミックな複数パートの変更

**開発：**
- Bash - コマンドを実行（git、テスト、リンター）
- Task - 複雑なタスク用に専門エージェントを起動
- TodoWrite - ToDoリストで進捗を追跡

**Web & API：**
- WebFetch、WebSearch - ドキュメントをリサーチ
- GitHub（gh cli）- PR、イシュー、レビュー
- Playwright - ブラウザ自動化、スクリーンショット

**統合：**
- AppSignal - ログとモニタリング
- Context7 - フレームワークドキュメント
- Stripe、Todoist、Featurebase（関連する場合）

## ベストプラクティス

1. **具体的かつ明確に** - 詳細な指示がより良い結果をもたらす
2. **複雑なタスクを分解** - ステップバイステップのプランを使用
3. **例を使用** - 既存のコードパターンを参照
4. **成功基準を含める** - テストパス、リンティングクリーンなど
5. **最初に考える** - 複雑な問題には「think hard」や「plan」キーワードを使用
6. **反復** - プロセスをステップバイステップでガイド

## 必須: YAMLフロントマター

**すべてのコマンドはYAMLフロントマターで始める必要があります：**

```yaml
---
name: command-name
description: このコマンドが何をするかの簡潔な説明（最大100文字）
argument-hint: "[コマンドが受け入れる引数]"
---
```

**フィールド：**
- `name`: 小文字のコマンド識別子（内部で使用）
- `description`: コマンドの目的の明確で簡潔な要約
- `argument-hint`: 期待される引数をユーザーに表示（例：`[file path]`、`[PR number]`、`[optional: format]`）

## コマンドの構造

```markdown
# [コマンド名]

[このコマンドが何をするかの簡潔な説明]

## ステップ

1. [具体的な詳細を含む最初のステップ]
   - ファイルパス、パターン、または制約を含める
   - 該当する場合は既存のコードを参照

2. [2番目のステップ]
   - 可能な場合は並列ツールコールを使用
   - 結果をチェック/検証

3. [最終ステップ]
   - テストを実行
   - コードをリント
   - 変更をコミット（適切な場合）

## 成功基準

- [ ] テストがパス
- [ ] コードがスタイルガイドに従っている
- [ ] ドキュメントが更新されている（必要な場合）
```

## 効果的なコマンドのヒント

- 動的入力には**$ARGUMENTS**プレースホルダーを使用
- **CLAUDE.md**のパターンと規約を参照
- **検証ステップを含める** - テスト、リンティング、ビジュアルチェック
- **制約について明示的に** - Xを変更しない、パターンYを使用など
- 構造化されたプロンプトには**XMLタグを使用**：`<task>`、`<requirements>`、`<constraints>`

## 例のパターン

```markdown
以下のステップに従って#$ARGUMENTSを実装：

1. 既存のパターンをリサーチ
   - Grepを使用して類似のコードを検索
   - アプローチを理解するために関連ファイルを読む

2. 実装を計画
   - エッジケースと要件を検討
   - 必要なテストケースを考慮

3. 実装
   - 既存のコードパターンに従う（特定のファイルを参照）
   - TDDを行う場合は先にテストを書く
   - CLAUDE.mdの規約にコードが従っていることを確認

4. 検証
   - テストを実行：`bin/rails test`
   - リンターを実行：`bundle exec standardrb`
   - git diffで変更を確認

5. コミット（オプション）
   - 変更をステージング
   - 明確なコミットメッセージを書く
```

## コマンドファイルの作成

1. `.claude/commands/[name].md`に**ファイルを作成**（`workflows/`のようなサブディレクトリもサポート）
2. **YAMLフロントマターで開始**（上記のセクションを参照）
3. 上記のテンプレートを使用して**コマンドを構造化**
4. 適切な引数で使用してコマンドを**テスト**

## コマンドファイルテンプレート

```markdown
---
name: command-name
description: このコマンドが何をするか
argument-hint: "[期待される引数]"
---

# コマンドタイトル

コマンドが何をするか、いつ使用するかの簡潔な紹介。

## ワークフロー

### ステップ1: [最初の主要ステップ]

何をするかの詳細。

### ステップ2: [2番目の主要ステップ]

何をするかの詳細。

## 成功基準

- [ ] 期待される結果1
- [ ] 期待される結果2
```
